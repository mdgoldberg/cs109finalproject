<!DOCTYPE HTML>
<!--
	Twenty by HTML5 UP
	html5up.net | @n33co
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Data Collection</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
		<link rel="stylesheet" href="assets/css/main.css" />
		<!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]-->
		<!--[if lte IE 9]><link rel="stylesheet" href="assets/css/ie9.css" /><![endif]-->
	</head>
	<body class="no-sidebar">
		<div id="page-wrapper">

			<!-- Header -->
				<header id="header">
					<h1 id="logo"><a href="index.html">Predicting Offensive Playcalling in the NFL</a></h1>
					<nav id="nav">
						<ul>
							<li class="current"><a href="index.html">Welcome</a></li>
							<li class="submenu">
								<a href="#">Our Project</a>
								<ul>
									<li><a href="collection.html">Data Collection</a></li>
									<li><a href="cleaning.html">Cleaning and Feature Creation</a></li>
									<li><a href="eda.html">Exploratory Data Analysis</a></li>
									<li><a href="analysis.html">Analysis and Results</a></li>
									<li><a href="future.html">Future Work</a></li>
									<li><a href="video.html" class="button special">Project Video</a></li>
								</ul>
							</li>
							<li><a href="https://github.com/mdgoldberg/cs109finalproject/blob/master/Index.ipynb" class="button special">Process Notebook</a></li>
						</ul>
					</nav>
				</header>

			<!-- Main -->
				<article id="main">
					<header class="special container">
						<span class="icon fa-bar-chart-o"></span>
						<h2>Data Collection</h2>
						<p>Creating the PFR library</p>
						<br />
						<p>The data collection process was an interesting problem in itself. Most of the code involved in data collection was actually written in the <a href="https://github.com/mdgoldberg/pfr">pfr python package</a>, which can be <a href="https://pypi.python.org/pypi/pfr">installed via pip</a> and was written by team member Matt Goldberg. This package, which currently contains roughly 1800 lines of Python code and remains a work-in-progress, provides a framework that makes scraping NFL-related data simple and stress-free. It works by modeling each aspect of <a href="https://pro-football-reference.com">pro-football-reference.com</a> as a python class that can be constructed using a unique identifier assigned to each player, team, and game; these classes then expose simple functions that can be used to scrape data from the relevant pages of the website. In this project, we primarily used the <code><a href="https://github.com/mdgoldberg/pfr/blob/master/pfr/teams.py">teams</a></code> and <code><a href="https://github.com/mdgoldberg/pfr/blob/master/pfr/boxscores.py">boxscores</a></code> modules of the package; we used the <code>teams</code> module to iterate over the teams in the league and to get the identifiers for the games they played each season (referred to on Pro Football Reference as "boxscores"). Then, after compiling a list of every NFL game played from 2002-2014, we used the <code>boxscores</code> module to scrape the play-by-play data from each game in the dataset. This scraping gives a raw dataset of about 450,000 plays and 115 features describing each play; the features include time left in the game, whether it was a run or a pass, and specific details about the play such as how many yards it gained, which players were involved on the play, and the result of the play (i.e., if it was a touchdown, interception, tackle, etc.). To see the scraping code itself, where the <a href="http://www.pro-football-reference.com/boxscores/201411020nwe.htm#pbp">boxscore play-by-play table</a> itself is parsed into a DataFrame, see the <code>parseTable</code> function in pfr's <code><a href="https://github.com/mdgoldberg/pfr/blob/master/pfr/utils.py">utils</a></code> module.</p>
					</header>
					
					<section class="wrapper style1 special container">
						<footer class="major">
							<ul class="buttons">
								<li><a href="index.html" class="button">Prev: Welcome</a></li>
								<li><a href="cleaning.html" class="button special">Next: Cleaning</a></li>
							</ul>
						</footer>
					</section>
				</article>

		</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.dropotron.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/jquery.scrollgress.min.js"></script>
			<script src="assets/js/skel.min.js"></script>
			<script src="assets/js/util.js"></script>
			<!--[if lte IE 8]><script src="assets/js/ie/respond.min.js"></script><![endif]-->
			<script src="assets/js/main.js"></script>

	</body>
</html>
